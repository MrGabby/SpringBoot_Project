<div class="container my-5 fade-in">
  <div class="row justify-content-center">
    <!-- Profile Card -->
    <div class="col-lg-4 mb-4 mb-lg-0">
      <div class="card shadow-sm border-0 text-center p-4 h-100">
        <div class="mb-3 position-relative d-inline-block mx-auto">
          <img [src]="'https://ui-avatars.com/api/?name=' + user.name + '&background=2e7d32&color=fff&size=150'" 
               class="rounded-circle shadow-sm" alt="Profile" style="width: 150px; height: 150px;">
          <span class="position-absolute bottom-0 end-0 p-2 bg-success border border-white rounded-circle">
            <i class="bi bi-pencil text-white" style="font-size: 0.8rem;"></i>
          </span>
        </div>
        <h4 class="fw-bold mb-1">{{user.name}}</h4>
        <p class="text-muted mb-3">{{user.roles}}</p>
        <div class="d-flex justify-content-center gap-2">
          <span class="badge bg-light text-dark border"><i class="bi bi-geo-alt"></i> {{user.address}}</span>
        </div>
      </div>
    </div>

    <!-- Edit Form -->
    <div class="col-lg-8">
      <div class="card shadow-sm border-0">
        <div class="card-header bg-white border-bottom-0 p-4 pb-0">
          <h4 class="fw-bold mb-0">Edit Profile</h4>
          <p class="text-muted small">Update your personal information</p>
        </div>
        <div class="card-body p-4">
          <form #form="ngForm" (ngSubmit)="UpdateUser()">
            <div class="row g-3">
              <!-- ID (Readonly) -->
              <div class="col-md-6">
                <div class="form-floating mb-3">
                  <input type="text" class="form-control" id="id" readonly name="id" [(ngModel)]="user.userid">
                  <label for="id">User ID</label>
                </div>
              </div>

              <!-- Role (Readonly/Editable based on logic, keeping as is for now) -->
              <div class="col-md-6">
                <div class="form-floating mb-3">
                  <input type="text" class="form-control" id="role" name="roles" [(ngModel)]="user.roles">
                  <label for="role">Role</label>
                </div>
              </div>

              <!-- Name -->
              <div class="col-md-12">
                <div class="form-floating mb-3">
                  <input type="text" class="form-control" id="name" name="name" [(ngModel)]="user.name" required>
                  <label for="name">Full Name</label>
                </div>
              </div>

              <!-- Email -->
              <div class="col-md-6">
                <div class="form-floating mb-3">
                  <input type="email" class="form-control" id="email" name="email_id" [(ngModel)]="user.email_id" required>
                  <label for="email">Email Address</label>
                </div>
              </div>

              <!-- Contact -->
              <div class="col-md-6">
                <div class="form-floating mb-3">
                  <input type="text" class="form-control" id="contact" name="contact" [(ngModel)]="user.contact" required>
                  <label for="contact">Contact Number</label>
                </div>
              </div>

              <!-- Address -->
              <div class="col-12">
                <div class="form-floating mb-3">
                  <input type="text" class="form-control" id="address" name="address" [(ngModel)]="user.address" required>
                  <label for="address">Address</label>
                </div>
              </div>

              <!-- Actions -->
              <div class="col-12 d-flex gap-3 mt-4">
                <button class="btn btn-success px-5 py-2 rounded-pill fw-bold" type="submit">
                  <i class="bi bi-check-lg me-1"></i> Save Changes
                </button>
                <button class="btn btn-outline-danger px-4 py-2 rounded-pill" type="button" 
                        (click)="deleteUser(user.userid)" *ngIf="CurrentUser?.roles==='Admin'">
                  <i class="bi bi-trash me-1"></i> Delete User
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
